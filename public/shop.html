<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>åº—èˆ—å—ä»˜ - æ¾ä¹ƒæœ¨é£¯åº—</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
    <style>body { text-align: center; } .big-btn { font-size: 2em; padding: 20px; width: 100%; }</style>
</head>
<body>
    <h1>ğŸª ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã›</h1>
    <p>ç¾åœ¨ã®å¾…ã¡çµ„æ•°: <span id="wait-count">0</span>çµ„</p>
    <hr>
    <div>
        <label>å¤§äºº</label><input type="number" id="adults" value="2" style="font-size:1.5em;">
        <label>å­ä¾›</label><input type="number" id="children" value="0" style="font-size:1.5em;">
        <button id="reg-shop" class="big-btn">æ•´ç†åˆ¸ã‚’ç™ºè¡Œã™ã‚‹</button>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        socket.on('init', (data) => document.getElementById('wait-count').innerText = data.queue.length);
        socket.on('update', (data) => document.getElementById('wait-count').innerText = data.queue.length);
        
        document.getElementById('reg-shop').onclick = () => {
            socket.emit('register', {
                type: 'shop',
                adults: document.getElementById('adults').value,
                children: document.getElementById('children').value,
                pref: 'åº—èˆ—'
            });
            alert('æ•´ç†åˆ¸ã‚’å°åˆ·ã—ã¦ã„ã¾ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚');
        };
    </script>
</body>
</html>
